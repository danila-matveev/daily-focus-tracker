# ARCHITECTURE

## Обзор

Telegram-бот "Фокус 2026" — это персональный трекер фокуса на 6 важных сферах жизни. Бот отправляет автоматические утренние и вечерние напоминания, показывает мотивационные сообщения и интегрируется с Mini App для отслеживания прогресса.

## Контекст

Проект создан для личного использования с целью поддержания фокуса на ключевых сферах жизни в 2026 году:
- Семья
- Бизнес
- AI
- Бренд
- Капитал
- Здоровье

Бот работает в Telegram и использует Mini App для расширенного функционала трекинга.

## Ключевые компоненты

### 1. Основной модуль (bot.py)
- **Обработчики команд**: `/start`, `/morning`, `/evening`
- **Обработчики кнопок**: утро, вечер, кредо, назад
- **Планировщик задач**: автоматические напоминания через job_queue
- **Клавиатуры**: главное меню и кнопка "Назад"

### 2. Конфигурация
- `BOT_TOKEN` — токен бота от BotFather
- `WEBAPP_URL` — URL Mini App
- `OWNER_ID` — Telegram ID для напоминаний
- `MORNING_TIME` / `EVENING_TIME` — время напоминаний (UTC)

### 3. Текстовые сообщения
- `CREDO_SHORT` — короткое кредо
- `CREDO_FULL` — полное кредо
- `MORNING_MESSAGE` — утреннее мотивационное сообщение
- `EVENING_MESSAGE` — вечернее сообщение

### 4. Mini App
- Веб-приложение для трекинга прогресса
- Интеграция через WebAppInfo в Telegram

## Потоки данных

### Поток 1: Запуск бота
1. Пользователь отправляет `/start`
2. Бот отправляет приветственное сообщение с кредо
3. Показывается главное меню с кнопками

### Поток 2: Взаимодействие с кнопками
1. Пользователь нажимает кнопку
2. `button_handler` обрабатывает callback_data
3. Бот обновляет сообщение с соответствующим контентом

### Поток 3: Автоматические напоминания
1. Job Queue запускает задачу в заданное время
2. Проверяется `OWNER_ID`
3. Отправляется соответствующее сообщение (утреннее/вечернее)

### Поток 4: Mini App
1. Пользователь нажимает "Открыть трекер"
2. Telegram открывает Mini App по `WEBAPP_URL`
3. Пользователь работает с трекером в веб-интерфейсе

## Технологии и зависимости

- **Язык**: Python 3.11.7
- **Библиотека**: python-telegram-bot[job-queue]==21.3
- **Платформа**: Telegram Bot API
- **Деплой**: (планируется)

## Нефункциональные требования и ограничения

### Требования
- Автоматические напоминания должны работать стабильно
- Бот должен отвечать на команды быстро
- Mini App должна быть доступна

### Ограничения
- Напоминания работают только для одного пользователя (OWNER_ID)
- Время напоминаний настроено для часового пояса Бали (UTC+8)
- Нет базы данных — все данные хранятся в Mini App

## Roadmap

### Текущая версия (v1.0)
- ✅ Базовые команды (/start, /morning, /evening)
- ✅ Кнопки для навигации
- ✅ Автоматические напоминания
- ✅ Интеграция с Mini App
- ✅ Документация

### Планируется
- [ ] Добавление базы данных для хранения данных
- [ ] Статистика и аналитика
- [ ] Множественные пользователи
- [ ] Экспорт данных
- [ ] Улучшение Mini App

