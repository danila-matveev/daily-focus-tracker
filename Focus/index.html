<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>–§–æ–∫—É—Å 2026</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
      background: linear-gradient(145deg, #1a1a2e 0%, #16213e 50%, #1a1a2e 100%);
      color: #e8e8e8;
      min-height: 100vh;
      padding: 16px;
      padding-bottom: 100px;
    }
    
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .date-block {
      display: flex;
      flex-direction: column;
    }
    
    .date-label {
      font-size: 11px;
      color: #888;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .date {
      font-size: 18px;
      font-weight: 600;
    }
    
    .streak {
      background: rgba(255, 150, 50, 0.15);
      padding: 6px 14px;
      border-radius: 16px;
      font-size: 13px;
      font-weight: 500;
    }
    
    .tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
    }
    
    .tab {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 12px;
      background: rgba(255,255,255,0.05);
      color: #888;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .tab.active {
      background: rgba(255,255,255,0.12);
      color: #fff;
    }
    
    .content {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }
    
    .hidden {
      display: none !important;
    }
    
    .credo-card {
      background: linear-gradient(135deg, rgba(100,150,200,0.12) 0%, rgba(150,100,200,0.08) 100%);
      border-radius: 14px;
      padding: 18px;
      cursor: pointer;
    }
    
    .card-label {
      font-size: 10px;
      color: #888;
      letter-spacing: 2px;
      margin-bottom: 10px;
    }
    
    .credo-text {
      font-size: 15px;
      line-height: 1.5;
      white-space: pre-line;
    }
    
    .credo-toggle {
      display: block;
      margin-top: 10px;
      font-size: 11px;
      color: #666;
    }
    
    .principles-card {
      background: rgba(255,255,255,0.03);
      border-radius: 14px;
      padding: 18px;
    }
    
    .principle {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 10px;
      font-size: 13px;
      line-height: 1.4;
    }
    
    .principle:last-child {
      margin-bottom: 0;
    }
    
    .principle-num {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 600;
      flex-shrink: 0;
    }
    
    .spheres-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }
    
    .sphere-card {
      background: rgba(255,255,255,0.03);
      border-radius: 10px;
      padding: 14px;
      border-left: 3px solid;
    }
    
    .sphere-header {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 6px;
    }
    
    .sphere-emoji {
      font-size: 16px;
    }
    
    .sphere-name {
      font-size: 13px;
      font-weight: 600;
    }
    
    .sphere-reminder {
      font-size: 11px;
      color: #999;
      line-height: 1.4;
      margin: 0;
    }
    
    /* Evening styles */
    .progress-bar {
      margin-bottom: 6px;
    }
    
    .progress-label {
      font-size: 12px;
      color: #888;
      margin-bottom: 6px;
    }
    
    .progress-track {
      height: 5px;
      background: rgba(255,255,255,0.1);
      border-radius: 3px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #4ade80, #22d3ee);
      border-radius: 3px;
      transition: width 0.3s;
    }
    
    .check-card {
      background: rgba(255,255,255,0.03);
      border-radius: 12px;
      padding: 14px;
      border-left: 3px solid;
      margin-bottom: 12px;
    }
    
    .check-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      font-size: 13px;
      font-weight: 500;
    }
    
    .check-count {
      font-size: 11px;
      color: #888;
    }
    
    .checks-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    
    .check-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.15s;
      -webkit-tap-highlight-color: transparent;
    }
    
    .check-item.checked {
      background: rgba(74, 222, 128, 0.1);
      border-color: rgba(74, 222, 128, 0.25);
    }
    
    .checkbox {
      width: 18px;
      height: 18px;
      border-radius: 4px;
      border: 2px solid rgba(255,255,255,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: #4ade80;
      font-weight: bold;
      flex-shrink: 0;
    }
    
    .check-item.checked .checkbox {
      border-color: #4ade80;
    }
    
    .check-label {
      font-size: 12px;
      color: #ccc;
    }
    
    .check-item.checked .check-label {
      color: #4ade80;
    }
    
    .reflection-section {
      display: flex;
      flex-direction: column;
      gap: 14px;
      margin-top: 6px;
    }
    
    .input-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    
    .input-label {
      font-size: 12px;
      color: #888;
    }
    
    .textarea {
      width: 100%;
      padding: 12px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 10px;
      color: #e8e8e8;
      font-size: 13px;
      font-family: inherit;
      resize: none;
      outline: none;
    }
    
    .textarea:focus {
      border-color: rgba(255,255,255,0.15);
    }
    
    .footer {
      margin-top: 24px;
      text-align: center;
      padding-bottom: 16px;
    }
    
    .footer-text {
      font-size: 11px;
      color: #555;
      letter-spacing: 1px;
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="date-block">
      <span class="date-label">–°–µ–≥–æ–¥–Ω—è</span>
      <span class="date" id="currentDate"></span>
    </div>
    <div class="streak" id="streak">üî• 0 –¥–Ω–µ–π</div>
  </header>

  <div class="tabs">
    <button class="tab active" id="tabMorning" onclick="switchTab('morning')">‚òÄÔ∏è –£—Ç—Ä–æ</button>
    <button class="tab" id="tabEvening" onclick="switchTab('evening')">üåô –í–µ—á–µ—Ä</button>
  </div>

  <!-- –£–¢–†–û -->
  <div class="content" id="morningContent">
    <div class="credo-card" onclick="toggleCredo()">
      <div class="card-label">–ö–†–ï–î–û 2026</div>
      <p class="credo-text" id="credoText">–î–µ–ª–∞–π –≤–∞–∂–Ω–æ–µ –≤ –±–∏–∑–Ω–µ—Å–µ. –í–Ω–µ–¥—Ä—è–π AI. –ë—É–¥—å —Å —Å–µ–º—å—ë–π. –¢—Ä–µ–Ω–∏—Ä—É–π—Å—è. –û—Å—Ç–∞–ª—å–Ω–æ–º—É ‚Äî –Ω–µ—Ç.</p>
      <span class="credo-toggle" id="credoToggle">‚Üì —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é</span>
    </div>

    <div class="principles-card">
      <div class="card-label">3 –ü–†–ò–ù–¶–ò–ü–ê</div>
      <div class="principle">
        <span class="principle-num">1</span>
        <span>–§–æ–∫—É—Å —Ç–æ–ª—å–∫–æ –Ω–∞ 6 —Å—Ñ–µ—Ä–∞—Ö. –û—Å—Ç–∞–ª—å–Ω–æ–º—É ‚Äî ¬´–Ω–µ—Ç¬ª.</span>
      </div>
      <div class="principle">
        <span class="principle-num">2</span>
        <span>–ú–æ—ë ¬´–¥–∞¬ª –¥–æ—Ä–æ–≥–æ: —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ —É—Å–∏–ª–∏–≤–∞–µ—Ç.</span>
      </div>
      <div class="principle">
        <span class="principle-num">3</span>
        <span>–£–ø—Ä–∞–≤–ª—è—é —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º: —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ –∏ —è—Å–Ω–æ—Å—Ç—å.</span>
      </div>
    </div>

    <div class="spheres-grid">
      <div class="sphere-card" style="border-left-color: #E8B4B8">
        <div class="sphere-header">
          <span class="sphere-emoji">üë®‚Äçüë©‚Äçüëß</span>
          <span class="sphere-name">–°–µ–º—å—è</span>
        </div>
        <p class="sphere-reminder">–†–∞–±–æ—Ç–∞ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ. –° —Å–µ–º—å—ë–π ‚Äî –ø–æ–ª–Ω–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ.</p>
      </div>
      
      <div class="sphere-card" style="border-left-color: #A8D5BA">
        <div class="sphere-header">
          <span class="sphere-emoji">üöÄ</span>
          <span class="sphere-name">–ë–∏–∑–Ω–µ—Å</span>
        </div>
        <p class="sphere-reminder">CEO-—Å—Ç—Ä–∞—Ç–µ–≥: –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ + –ø—É—à. –ü–æ–∂–∞—Ä—ã ‚Äî –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö.</p>
      </div>
      
      <div class="sphere-card" style="border-left-color: #B4D4E8">
        <div class="sphere-header">
          <span class="sphere-emoji">ü§ñ</span>
          <span class="sphere-name">AI + –í–∞–π–±–∫–æ–¥–∏–Ω–≥</span>
        </div>
        <p class="sphere-reminder">AI ‚Äî —Ç–≤–æ—ë –æ—Ä—É–∂–∏–µ. –ù–µ–¥–µ–ª—è –±–µ–∑ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è = –ø—Ä–æ–≤–∞–ª.</p>
      </div>
      
      <div class="sphere-card" style="border-left-color: #E8D4B4">
        <div class="sphere-header">
          <span class="sphere-emoji">üì¢</span>
          <span class="sphere-name">–õ–∏—á–Ω—ã–π –±—Ä–µ–Ω–¥</span>
        </div>
        <p class="sphere-reminder">–ü—Ä–æ–±–µ–π –±—Ä–µ—à—å –º–æ–ª—á–∞–Ω–∏—è. –ì–æ–≤–æ—Ä–∏ –æ —Å–µ–±–µ —á–µ—Å—Ç–Ω–æ.</p>
      </div>
      
      <div class="sphere-card" style="border-left-color: #D4B4E8">
        <div class="sphere-header">
          <span class="sphere-emoji">üí∞</span>
          <span class="sphere-name">–ö–∞–ø–∏—Ç–∞–ª</span>
        </div>
        <p class="sphere-reminder">–ö–∞–ø–∏—Ç–∞–ª ‚Äî –∫–∞–∫ –≥–∏–≥–∏–µ–Ω–∞. 1 —Å–ª–æ—Ç –≤ –Ω–µ–¥–µ–ª—é.</p>
      </div>
      
      <div class="sphere-card" style="border-left-color: #B4E8D4">
        <div class="sphere-header">
          <span class="sphere-emoji">üí™</span>
          <span class="sphere-name">–ó–¥–æ—Ä–æ–≤—å–µ</span>
        </div>
        <p class="sphere-reminder">–¢—Ä–µ–Ω–∏—Ä—É–π—Å—è. –°–ø–∏. –ï—à—å –±–µ–ª–æ–∫. –í—ã–±–∏—Ä–∞–π –ø–æ–∑–∏—Ç–∏–≤.</p>
      </div>
    </div>
  </div>

  <!-- –í–ï–ß–ï–† -->
  <div class="content hidden" id="eveningContent">
    <div class="progress-bar">
      <div class="progress-label">–ü—Ä–æ–≥—Ä–µ—Å—Å –¥–Ω—è: <span id="progressPercent">0</span>%</div>
      <div class="progress-track">
        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
      </div>
    </div>

    <!-- –°–µ–º—å—è -->
    <div class="check-card" style="border-left-color: #E8B4B8">
      <div class="check-header">
        <span>üë®‚Äçüë©‚Äçüëß –°–µ–º—å—è</span>
        <span class="check-count" id="count-family">0/2</span>
      </div>
      <div class="checks-list">
        <div class="check-item" data-key="family_no_screens" onclick="toggleCheck(this)">
          <span class="checkbox"></span>
          <span class="check-label">–ë–µ–∑ —ç–∫—Ä–∞–Ω–æ–≤ —Å —Å–µ–º—å—ë–π</span>
        </div>
        <div class="check-item" data-key="family_presence" onclick="toggleCheck(this)">
          <span class="checkbox"></span>
          <span class="check-label">–ë—ã–ª –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º</span>
        </div>
      </div>
    </div>

    <!-- –ë–∏–∑–Ω–µ—Å -->
    <div class="check-card" style="border-left-color: #A8D5BA">
      <div class="check-header">
        <span>üöÄ –ë–∏–∑–Ω–µ—Å</span>
        <span class="check-count" id="count-business">0/2</span>
      </div>
      <div class="checks-list">
        <div class="check-item" data-key="business_moved" onclick="toggleCheck(this)">
          <span class="checkbox"></span>
          <span class="check-label">–î–≤–∏–Ω—É–ª –±–∏–∑–Ω–µ—Å –≤–ø–µ—Ä—ë–¥</span>
        </div>
        <div class="check-item" data-key="business_no_fire" onclick="toggleCheck(this)">
          <span class="checkbox"></span>
          <span class="check-label">–ù–µ —Ç—É—à–∏–ª –ø–æ–∂–∞—Ä—ã</span>
        </div>
      </div>
    </div>

    <!-- AI -->
    <div class="check-card" style="border-left-color: #B4D4E8">
      <div class="check-header">
        <span>ü§ñ AI + –í–∞–π–±–∫–æ–¥–∏–Ω–≥</span>
        <span class="check-count" id="count-ai">0/2</span>
      </div>
      <div class="checks-list">
        <div class="check-item" data-key="ai_learned" onclick="toggleCheck(this)">
          <span class="checkbox"></span>
          <span class="check-label">–£—á–∏–ª—Å—è/–ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞–ª AI</span>
        </div>
        <div class="check-item" data-key="ai_implemented" onclick="toggleCheck(this)">
          <span class="checkbox"></span>
          <span class="check-label">–í–Ω–µ–¥—Ä–∏–ª —á—Ç–æ-—Ç–æ –≤ –±–∏–∑–Ω–µ—Å</span>
        </div>
      </div>
    </div>

    <!-- –ë—Ä–µ–Ω–¥ -->
    <div class="check-card" style="border-left-color: #E8D4B4">
      <div class="check-header">
        <span>üì¢ –õ–∏—á–Ω—ã–π –±—Ä–µ–Ω–¥</span>
        <span class="check-count" id="count-brand">0/2</span>
      </div>
      <div class="checks-list">
        <div class="check-item" data-key="brand_content" onclick="toggleCheck(this)">
          <span class="checkbox"></span>
          <span class="check-label">–°–æ–∑–¥–∞–ª –∫–æ–Ω—Ç–µ–Ω—Ç</span>
        </div>
        <div class="check-item" data-key="brand_network" onclick="toggleCheck(this)">
          <span class="checkbox"></span>
          <span class="check-label">–°–≤—è–∑–∞–ª—Å—è —Å –∫–µ–º-—Ç–æ –Ω–æ–≤—ã–º</span>
        </div>
      </div>
    </div>

    <!-- –ö–∞–ø–∏—Ç–∞–ª -->
    <div class="check-card" style="border-left-color: #D4B4E8">
      <div class="check-header">
        <span>üí∞ –ö–∞–ø–∏—Ç–∞–ª</span>
        <span class="check-count" id="count-capital">0/1</span>
      </div>
      <div class="checks-list">
        <div class="check-item" data-key="capital_reviewed" onclick="toggleCheck(this)">
          <span class="checkbox"></span>
          <span class="check-label">–£–¥–µ–ª–∏–ª –≤—Ä–µ–º—è –ø–æ—Ä—Ç—Ñ–µ–ª—é</span>
        </div>
      </div>
    </div>

    <!-- –ó–¥–æ—Ä–æ–≤—å–µ -->
    <div class="check-card" style="border-left-color: #B4E8D4">
      <div class="check-header">
        <span>üí™ –ó–¥–æ—Ä–æ–≤—å–µ</span>
        <span class="check-count" id="count-health">0/4</span>
      </div>
      <div class="checks-list">
        <div class="check-item" data-key="health_workout" onclick="toggleCheck(this)">
          <span class="checkbox"></span>
          <span class="check-label">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</span>
        </div>
        <div class="check-item" data-key="health_meditation" onclick="toggleCheck(this)">
          <span class="checkbox"></span>
          <span class="check-label">–ú–µ–¥–∏—Ç–∞—Ü–∏—è</span>
        </div>
        <div class="check-item" data-key="health_no_alcohol" onclick="toggleCheck(this)">
          <span class="checkbox"></span>
          <span class="check-label">0 –∞–ª–∫–æ–≥–æ–ª—è</span>
        </div>
        <div class="check-item" data-key="health_no_nicotine" onclick="toggleCheck(this)">
          <span class="checkbox"></span>
          <span class="check-label">0 –Ω–∏–∫–æ—Ç–∏–Ω–∞</span>
        </div>
      </div>
    </div>

    <div class="reflection-section">
      <div class="input-group">
        <label class="input-label">üèÜ –ü–æ–±–µ–¥—ã –¥–Ω—è</label>
        <textarea class="textarea" id="wins" placeholder="–ß—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å —Å–µ–≥–æ–¥–Ω—è?" rows="2"></textarea>
      </div>
      <div class="input-group">
        <label class="input-label">üí≠ –†–µ—Ñ–ª–µ–∫—Å–∏—è</label>
        <textarea class="textarea" id="reflection" placeholder="–ß—Ç–æ –∫—Ä–∞–ª–æ —Ñ–æ–∫—É—Å? –ö–∞–∫–∏–µ –≤—ã–≤–æ–¥—ã?" rows="3"></textarea>
      </div>
    </div>
  </div>

  <footer class="footer">
    <span class="footer-text">6 —Å—Ñ–µ—Ä ¬∑ –ü—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ ¬∑ –õ—é–±–æ–≤—å ¬∑ –°–≤–æ–±–æ–¥–∞</span>
  </footer>

  <script>
    // Telegram WebApp
    const tg = window.Telegram && window.Telegram.WebApp;
    if (tg) {
      tg.ready();
      tg.expand();
    }

    // Constants
    const CREDO_SHORT = '–î–µ–ª–∞–π –≤–∞–∂–Ω–æ–µ –≤ –±–∏–∑–Ω–µ—Å–µ. –í–Ω–µ–¥—Ä—è–π AI. –ë—É–¥—å —Å —Å–µ–º—å—ë–π. –¢—Ä–µ–Ω–∏—Ä—É–π—Å—è. –û—Å—Ç–∞–ª—å–Ω–æ–º—É ‚Äî –Ω–µ—Ç.';
    const CREDO_FULL = '–ù–µ—Ç —à–æ—Ä—Ç–∫–∞—Ç–æ–≤. –î–µ–ª–∞–π —Ä–∞–±–æ—Ç—É. –î–≤–∏–≥–∞–π –±–∏–∑–Ω–µ—Å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å. –í–Ω–µ–¥—Ä—è–π AI ‚Äî —ç—Ç–æ —Ç–≤–æ—ë –æ—Ä—É–∂–∏–µ. –ù–∞–Ω–∏–º–∞–π –ª—é–¥–µ–π —Å–∏–ª—å–Ω–µ–µ —Å–µ–±—è. –°—á–∏—Ç–∞–π —Ü–∏—Ñ—Ä—ã.\n\n–ë—É–¥—å —Å –∂–µ–Ω–æ–π. –ë—É–¥—å —Å –¥–æ—á–∫–æ–π. –ë–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞. –ü–æ–ª–Ω–æ—Å—Ç—å—é. –†–∞–±–æ—Ç–∞ ‚Äî –≤ –∫–∞–±–∏–Ω–µ—Ç–µ. –°–µ–º—å—è ‚Äî –≤ –º–æ–º–µ–Ω—Ç–µ.\n\n–¢—Ä–µ–Ω–∏—Ä—É–π—Å—è. –°–ø–∏. –ï—à—å –±–µ–ª–æ–∫. –ù–µ –ø–µ–π. –ù–µ –∫—É—Ä–∏. –ú–µ–¥–∏—Ç–∏—Ä—É–π. –í—ã–±–∏—Ä–∞–π –ø–æ–∑–∏—Ç–∏–≤, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –≤—Å—ë –∏–¥—ë—Ç –ø–æ –ø–∏–∑–¥–µ.\n\n–®–µ—Å—Ç—å –æ–ø–æ—Ä. –û—Å—Ç–∞–ª—å–Ω–æ–º—É ‚Äî –Ω–µ—Ç. –ü—Ä–æ–∂–∏–≤–∏ —ç—Ç–æ—Ç –¥–µ–Ω—å –∫–∞–∫ —Ü–µ–ª—É—é –∂–∏–∑–Ω—å.';

    // State
    let credoExpanded = false;
    let todayData = { checks: {}, wins: '', reflection: '' };
    const today = new Date().toISOString().split('T')[0];
    const STORAGE_KEY = 'focus_day_' + today;
    const STREAK_KEY = 'focus_streak_data';

    // Init
    function init() {
      // Set date
      const options = { weekday: 'long', day: 'numeric', month: 'long' };
      const dateStr = new Date().toLocaleDateString('ru-RU', options);
      document.getElementById('currentDate').textContent = dateStr.charAt(0).toUpperCase() + dateStr.slice(1);

      // Load data
      loadData();
      
      // Setup autosave for textareas
      document.getElementById('wins').addEventListener('input', saveData);
      document.getElementById('reflection').addEventListener('input', saveData);
    }

    function loadData() {
      try {
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
          todayData = JSON.parse(saved);
          
          // Restore checks
          document.querySelectorAll('.check-item').forEach(item => {
            const key = item.getAttribute('data-key');
            if (todayData.checks && todayData.checks[key]) {
              item.classList.add('checked');
              item.querySelector('.checkbox').textContent = '‚úì';
            }
          });
          
          // Restore textareas
          document.getElementById('wins').value = todayData.wins || '';
          document.getElementById('reflection').value = todayData.reflection || '';
        }
        
        updateProgress();
        updateStreak();
      } catch (e) {
        console.log('Load error:', e);
      }
    }

    function saveData() {
      try {
        todayData.wins = document.getElementById('wins').value;
        todayData.reflection = document.getElementById('reflection').value;
        localStorage.setItem(STORAGE_KEY, JSON.stringify(todayData));
        updateStreak();
      } catch (e) {
        console.log('Save error:', e);
      }
    }

    function updateStreak() {
      try {
        // Get all days from localStorage
        let streak = 0;
        const checkDate = new Date();
        
        for (let i = 0; i < 365; i++) {
          const dateKey = 'focus_day_' + checkDate.toISOString().split('T')[0];
          const dayData = localStorage.getItem(dateKey);
          
          if (dayData) {
            streak++;
            checkDate.setDate(checkDate.getDate() - 1);
          } else {
            break;
          }
        }
        
        const streakEl = document.getElementById('streak');
        if (streak > 0) {
          const word = streak === 1 ? '–¥–µ–Ω—å' : (streak < 5 ? '–¥–Ω—è' : '–¥–Ω–µ–π');
          streakEl.textContent = 'üî• ' + streak + ' ' + word;
          streakEl.style.display = 'block';
        } else {
          streakEl.style.display = 'none';
        }
      } catch (e) {
        console.log('Streak error:', e);
      }
    }

    function toggleCheck(element) {
      const key = element.getAttribute('data-key');
      const isChecked = element.classList.toggle('checked');
      
      element.querySelector('.checkbox').textContent = isChecked ? '‚úì' : '';
      
      if (!todayData.checks) todayData.checks = {};
      todayData.checks[key] = isChecked;
      
      saveData();
      updateProgress();
      updateCounts();
      
      // Haptic feedback
      if (tg && tg.HapticFeedback) {
        tg.HapticFeedback.impactOccurred('light');
      }
    }

    function updateProgress() {
      const total = document.querySelectorAll('.check-item').length;
      const checked = document.querySelectorAll('.check-item.checked').length;
      const percent = total > 0 ? Math.round((checked / total) * 100) : 0;
      
      document.getElementById('progressPercent').textContent = percent;
      document.getElementById('progressFill').style.width = percent + '%';
      
      updateCounts();
    }

    function updateCounts() {
      const categories = {
        'family': { total: 2, checked: 0 },
        'business': { total: 2, checked: 0 },
        'ai': { total: 2, checked: 0 },
        'brand': { total: 2, checked: 0 },
        'capital': { total: 1, checked: 0 },
        'health': { total: 4, checked: 0 }
      };
      
      document.querySelectorAll('.check-item.checked').forEach(item => {
        const key = item.getAttribute('data-key');
        const category = key.split('_')[0];
        if (categories[category]) {
          categories[category].checked++;
        }
      });
      
      Object.keys(categories).forEach(cat => {
        const el = document.getElementById('count-' + cat);
        if (el) {
          el.textContent = categories[cat].checked + '/' + categories[cat].total;
        }
      });
    }

    function switchTab(tab) {
      document.getElementById('tabMorning').classList.toggle('active', tab === 'morning');
      document.getElementById('tabEvening').classList.toggle('active', tab === 'evening');
      
      document.getElementById('morningContent').classList.toggle('hidden', tab !== 'morning');
      document.getElementById('eveningContent').classList.toggle('hidden', tab !== 'evening');
      
      if (tg && tg.HapticFeedback) {
        tg.HapticFeedback.impactOccurred('light');
      }
    }

    function toggleCredo() {
      credoExpanded = !credoExpanded;
      document.getElementById('credoText').textContent = credoExpanded ? CREDO_FULL : CREDO_SHORT;
      document.getElementById('credoToggle').textContent = credoExpanded ? '‚Üë —Å–≤–µ—Ä–Ω—É—Ç—å' : '‚Üì —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é';
    }

    // Start
    init();
  </script>
</body>
</html>
